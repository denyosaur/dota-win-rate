generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["jsonProtocol"]
}

datasource db {
  provider          = "postgresql"
  url               = env("NEXT_PUBLIC_POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl         = env("NEXT_PUBLIC_POSTGRES_URL_NON_POOLING") // uses a direct connection
  shadowDatabaseUrl = env("NEXT_PUBLIC_POSTGRES_URL_NON_POOLING") // used for migrations
}

model heroes {
  hero_id               Int              @id @map(name: "heroId")
  hero_name             String
  hero_image            String
  primary_attributes    String
  roles                 String[]
  hero_win_rates        winRates[]
  matches               matches[]

  @@map("heroes")
}

model winRates {
  id       String   @id 
  hero_id  heroes   @relation(fields: [hero], references: [hero_id], onDelete: Cascade)
  hero     Int      @map(name: "heroId")
  day      BigInt
  wins     Int
  matches  Int

  @@map("winRates")
}

model matches {
  id          Int      @id @default(autoincrement())
  match_id    BigInt
  hero_id     heroes   @relation(fields: [hero], references: [hero_id], onDelete: Cascade)
  hero        Int      @map(name: "heroId")
  start_time  BigInt
  win         Boolean

  @@map("matches")
}
