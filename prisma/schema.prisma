generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["jsonProtocol"]
}

datasource db {
  provider          = "postgresql"
  url               = env("NEXT_PUBLIC_POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl         = env("NEXT_PUBLIC_POSTGRES_URL_NON_POOLING") // uses a direct connection
  shadowDatabaseUrl = env("NEXT_PUBLIC_POSTGRES_URL_NON_POOLING") // used for migrations
}

model heroes {
  hero_id         Int              @id @map(name: "heroId")
  hero_name       String
  hero_image      String
  hero_win_rates  hero_win_rates[]
  matches         matches[]

  @@map("heroes")
}

model hero_win_rates {
  id       Int      @id @default(autoincrement())
  hero_id  heroes   @relation(fields: [hero], references: [hero_id], onDelete: Cascade)
  hero     Int      @map(name: "heroId")
  date     BigInt
  wins     Int
  losses   Int
  win_rate Float

  @@map("heroWinRates")
}

model matches {
  id          Int      @id @default(autoincrement())
  match_id    BigInt
  hero_id     heroes   @relation(fields: [hero], references: [hero_id], onDelete: Cascade)
  hero        Int      @map(name: "heroId")
  start_time  BigInt
  win         Boolean

  @@map("matches")
}
